\hypertarget{dedos__threads_8c}{\section{src/runtime/dedos\-\_\-threads.c File Reference}
\label{dedos__threads_8c}\index{src/runtime/dedos\-\_\-threads.\-c@{src/runtime/dedos\-\_\-threads.\-c}}
}


Control spawned threads with message queue within De\-D\-O\-S.  


{\ttfamily \#include \char`\"{}dedos\-\_\-threads.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}thread\-\_\-message.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}output\-\_\-thread.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}logging.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}rt\-\_\-stats.\-h\char`\"{}}\\*
{\ttfamily \#include $<$stdbool.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$sched.\-h$>$}\\*
{\ttfamily \#include $<$sys/resource.\-h$>$}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structthread__init}{thread\-\_\-init}
\begin{DoxyCompactList}\small\item\em Structure which holds the initialization info for a \hyperlink{structdedos__thread}{dedos\-\_\-thread}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{dedos__threads_8c_a369266c24eacffb87046522897a570d5}{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}
\begin{DoxyCompactList}\small\item\em Needed for C\-P\-U\-\_\-\-S\-E\-T etc. \end{DoxyCompactList}\item 
\#define \hyperlink{dedos__threads_8c_a705cb27a1ac6915760cf88cebba062ca}{M\-A\-X\-\_\-\-D\-E\-D\-O\-S\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-D}~32
\begin{DoxyCompactList}\small\item\em The maximum identifier that can be used for a \hyperlink{structdedos__thread}{dedos\-\_\-thread}. \end{DoxyCompactList}\item 
\#define \hyperlink{dedos__threads_8c_a009855593b59738d24dbfc236edb3b14}{M\-A\-X\-\_\-\-C\-O\-R\-E\-S}~16
\begin{DoxyCompactList}\small\item\em The maximum number of cores that can be present on a node. \end{DoxyCompactList}\item 
\#define \hyperlink{dedos__threads_8c_a56ecb7e9b922bd8793d20eaebf793be7}{O\-U\-T\-P\-U\-T\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-N\-D\-E\-X}~\hyperlink{worker__thread_8c_a705cb27a1ac6915760cf88cebba062ca}{M\-A\-X\-\_\-\-D\-E\-D\-O\-S\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-D} + 1
\begin{DoxyCompactList}\small\item\em The index at which to store the \hyperlink{structdedos__thread}{dedos\-\_\-thread} handling sending messages. \end{DoxyCompactList}\item 
\#define \hyperlink{dedos__threads_8c_aa740056ba0da4148b051e08640e540f7}{N\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-S\-T\-A\-T\-\_\-\-I\-T\-E\-M\-S}~sizeof(\hyperlink{dedos__threads_8c_afb032c6cebdf1139918c77512a8d5391}{thread\-\_\-stat\-\_\-items}) / sizeof($\ast$\hyperlink{dedos__threads_8c_afb032c6cebdf1139918c77512a8d5391}{thread\-\_\-stat\-\_\-items})
\item 
\#define \hyperlink{dedos__threads_8c_aca31b6b12493c91f78b00950c95c9bf8}{D\-E\-F\-A\-U\-L\-T\-\_\-\-W\-A\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T\-\_\-\-S}~1
\begin{DoxyCompactList}\small\item\em The amount of time that \hyperlink{dedos__threads_8c_a0e9f00b60e6fbcefadacb5f430abf8aa}{thread\-\_\-wait} should wait for if no timeout is provided. \end{DoxyCompactList}\item 
\#define \hyperlink{dedos__threads_8c_a003e2bee2ab0f27a9d2bfec847b30393}{M\-A\-X\-\_\-\-M\-E\-T\-R\-I\-C\-\_\-\-I\-N\-T\-E\-R\-V\-A\-L\-\_\-\-M\-S}~500
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{dedos__threads_8c_a113bd0ac8ad6e871cf4e2c713b6995a8}{init\-\_\-thread\-\_\-stat\-\_\-items} (int id)
\begin{DoxyCompactList}\small\item\em Initilizes the stat items associated with a thread. \end{DoxyCompactList}\item 
struct \hyperlink{structdedos__thread}{dedos\-\_\-thread} $\ast$ \hyperlink{dedos__threads_8c_ad2be2a452f4ee946b74f926d9b885af6}{get\-\_\-dedos\-\_\-thread} (int id)
\begin{DoxyCompactList}\small\item\em Returns the \hyperlink{structdedos__thread}{dedos\-\_\-thread} with the given I\-D. \end{DoxyCompactList}\item 
static int \hyperlink{dedos__threads_8c_a52b3a7e9424f741c06d541d059a47e98}{init\-\_\-dedos\-\_\-thread} (struct \hyperlink{structdedos__thread}{dedos\-\_\-thread} $\ast$thread, enum \hyperlink{dfg_8h_a673ccd9aadafd31e8beaf16423c07db2}{thread\-\_\-mode} mode, int id)
\begin{DoxyCompactList}\small\item\em Initializes a \hyperlink{structdedos__thread}{dedos\-\_\-thread} structure to contain the appropriate fields. \end{DoxyCompactList}\item 
static int \hyperlink{dedos__threads_8c_a5e57e733d68866e6cfae829583da6f89}{pin\-\_\-thread} (pthread\-\_\-t ptid)
\begin{DoxyCompactList}\small\item\em Pins the thread with the pthread id {\ttfamily ptid} to the first unused core. \end{DoxyCompactList}\item 
void \hyperlink{dedos__threads_8c_a97563d2c123c5d0c52088ae62c69dc7e}{dedos\-\_\-thread\-\_\-stop} (struct \hyperlink{structdedos__thread}{dedos\-\_\-thread} $\ast$thread)
\begin{DoxyCompactList}\small\item\em Sets the exit signal for a thread, causing the main loop to quit. \end{DoxyCompactList}\item 
void \hyperlink{dedos__threads_8c_a8149e98a49e985082afb18b9fe30e94d}{dedos\-\_\-thread\-\_\-join} (struct \hyperlink{structdedos__thread}{dedos\-\_\-thread} $\ast$thread)
\begin{DoxyCompactList}\small\item\em Joins and destroys the \hyperlink{structdedos__thread}{dedos\-\_\-thread}. \end{DoxyCompactList}\item 
int \hyperlink{dedos__threads_8c_a84fe48f8c905bad9ee99509742472900}{dedos\-\_\-thread\-\_\-should\-\_\-exit} (struct \hyperlink{structdedos__thread}{dedos\-\_\-thread} $\ast$thread)
\begin{DoxyCompactList}\small\item\em Returns 1 if the exit signal has been triggered, otherwise 0. \end{DoxyCompactList}\item 
static void $\ast$ \hyperlink{dedos__threads_8c_a2035e21970dd9c3b7ce4465805a1cfcd}{dedos\-\_\-thread\-\_\-starter} (void $\ast$thread\-\_\-init\-\_\-v)
\begin{DoxyCompactList}\small\item\em The actual function passed to pthread\-\_\-create() that starts a new thread. \end{DoxyCompactList}\item 
static void \hyperlink{dedos__threads_8c_adccaa8b29bf590e9e04c14d1943c89ac}{gather\-\_\-thread\-\_\-metrics} (struct \hyperlink{structdedos__thread}{dedos\-\_\-thread} $\ast$thread)
\item 
int \hyperlink{dedos__threads_8c_a0e9f00b60e6fbcefadacb5f430abf8aa}{thread\-\_\-wait} (struct \hyperlink{structdedos__thread}{dedos\-\_\-thread} $\ast$thread, struct timespec $\ast$abs\-\_\-timeout)
\begin{DoxyCompactList}\small\item\em To be called from the thread, causes it to wait until a message has been received or the timeout has been reached. \end{DoxyCompactList}\item 
int \hyperlink{dedos__threads_8c_aa336318af10f81d18bfd2ea9fb0ce45d}{start\-\_\-dedos\-\_\-thread} (\hyperlink{dedos__threads_8h_abc395397d24e50b8932e864465a17aa5}{dedos\-\_\-thread\-\_\-fn} thread\-\_\-fn, \hyperlink{dedos__threads_8h_a05cf7cb0c2d44afe48767196d7554f55}{dedos\-\_\-thread\-\_\-init\-\_\-fn} init\-\_\-fn, \hyperlink{dedos__threads_8h_a8c7746e69f0ed91647b8d28e3e660c2a}{dedos\-\_\-thread\-\_\-destroy\-\_\-fn} destroy\-\_\-fn, enum \hyperlink{dfg_8h_af31ca3002c5b769551da6f1183bafed5}{blocking\-\_\-mode} mode, int id, struct \hyperlink{structdedos__thread}{dedos\-\_\-thread} $\ast$thread)
\begin{DoxyCompactList}\small\item\em Initilizes and starts execution of a \hyperlink{structdedos__thread}{dedos\-\_\-thread}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static struct \hyperlink{structdedos__thread}{dedos\-\_\-thread} $\ast$ \hyperlink{dedos__threads_8c_a3c60433df66ec61cd178275f4231db3d}{dedos\-\_\-threads} \mbox{[}32+2\mbox{]}
\begin{DoxyCompactList}\small\item\em Static structure to hold created \hyperlink{structdedos__thread}{dedos\-\_\-thread}'s. \end{DoxyCompactList}\item 
static int \hyperlink{dedos__threads_8c_aecb0e59916f729a6b443d7bb30ae58b0}{pinned\-\_\-cores} \mbox{[}16\mbox{]}
\begin{DoxyCompactList}\small\item\em Keep track of which cores have been assigned to threads. \end{DoxyCompactList}\item 
enum \hyperlink{stat__ids_8h_ac210bd14ba53357098c0b3ebdd69784e}{stat\-\_\-id} \hyperlink{dedos__threads_8c_afb032c6cebdf1139918c77512a8d5391}{thread\-\_\-stat\-\_\-items} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Control spawned threads with message queue within De\-D\-O\-S. 

Definition in file \hyperlink{dedos__threads_8c_source}{dedos\-\_\-threads.\-c}.



\subsection{Macro Definition Documentation}
\hypertarget{dedos__threads_8c_a369266c24eacffb87046522897a570d5}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E@{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}}
\index{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E@{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define \-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}}\label{dedos__threads_8c_a369266c24eacffb87046522897a570d5}


Needed for C\-P\-U\-\_\-\-S\-E\-T etc. 



Definition at line 8 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_aca31b6b12493c91f78b00950c95c9bf8}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!D\-E\-F\-A\-U\-L\-T\-\_\-\-W\-A\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T\-\_\-\-S@{D\-E\-F\-A\-U\-L\-T\-\_\-\-W\-A\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T\-\_\-\-S}}
\index{D\-E\-F\-A\-U\-L\-T\-\_\-\-W\-A\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T\-\_\-\-S@{D\-E\-F\-A\-U\-L\-T\-\_\-\-W\-A\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T\-\_\-\-S}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{D\-E\-F\-A\-U\-L\-T\-\_\-\-W\-A\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T\-\_\-\-S}]{\setlength{\rightskip}{0pt plus 5cm}\#define D\-E\-F\-A\-U\-L\-T\-\_\-\-W\-A\-I\-T\-\_\-\-T\-I\-M\-E\-O\-U\-T\-\_\-\-S~1}}\label{dedos__threads_8c_aca31b6b12493c91f78b00950c95c9bf8}


The amount of time that \hyperlink{dedos__threads_8c_a0e9f00b60e6fbcefadacb5f430abf8aa}{thread\-\_\-wait} should wait for if no timeout is provided. 



Definition at line 211 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_a009855593b59738d24dbfc236edb3b14}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!M\-A\-X\-\_\-\-C\-O\-R\-E\-S@{M\-A\-X\-\_\-\-C\-O\-R\-E\-S}}
\index{M\-A\-X\-\_\-\-C\-O\-R\-E\-S@{M\-A\-X\-\_\-\-C\-O\-R\-E\-S}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{M\-A\-X\-\_\-\-C\-O\-R\-E\-S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\-A\-X\-\_\-\-C\-O\-R\-E\-S~16}}\label{dedos__threads_8c_a009855593b59738d24dbfc236edb3b14}


The maximum number of cores that can be present on a node. 



Definition at line 24 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_a705cb27a1ac6915760cf88cebba062ca}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!M\-A\-X\-\_\-\-D\-E\-D\-O\-S\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-D@{M\-A\-X\-\_\-\-D\-E\-D\-O\-S\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-D}}
\index{M\-A\-X\-\_\-\-D\-E\-D\-O\-S\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-D@{M\-A\-X\-\_\-\-D\-E\-D\-O\-S\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-D}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{M\-A\-X\-\_\-\-D\-E\-D\-O\-S\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-D}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\-A\-X\-\_\-\-D\-E\-D\-O\-S\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-D~32}}\label{dedos__threads_8c_a705cb27a1ac6915760cf88cebba062ca}


The maximum identifier that can be used for a \hyperlink{structdedos__thread}{dedos\-\_\-thread}. 



Definition at line 22 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_a003e2bee2ab0f27a9d2bfec847b30393}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!M\-A\-X\-\_\-\-M\-E\-T\-R\-I\-C\-\_\-\-I\-N\-T\-E\-R\-V\-A\-L\-\_\-\-M\-S@{M\-A\-X\-\_\-\-M\-E\-T\-R\-I\-C\-\_\-\-I\-N\-T\-E\-R\-V\-A\-L\-\_\-\-M\-S}}
\index{M\-A\-X\-\_\-\-M\-E\-T\-R\-I\-C\-\_\-\-I\-N\-T\-E\-R\-V\-A\-L\-\_\-\-M\-S@{M\-A\-X\-\_\-\-M\-E\-T\-R\-I\-C\-\_\-\-I\-N\-T\-E\-R\-V\-A\-L\-\_\-\-M\-S}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{M\-A\-X\-\_\-\-M\-E\-T\-R\-I\-C\-\_\-\-I\-N\-T\-E\-R\-V\-A\-L\-\_\-\-M\-S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\-A\-X\-\_\-\-M\-E\-T\-R\-I\-C\-\_\-\-I\-N\-T\-E\-R\-V\-A\-L\-\_\-\-M\-S~500}}\label{dedos__threads_8c_a003e2bee2ab0f27a9d2bfec847b30393}


Definition at line 213 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_aa740056ba0da4148b051e08640e540f7}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!N\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-S\-T\-A\-T\-\_\-\-I\-T\-E\-M\-S@{N\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-S\-T\-A\-T\-\_\-\-I\-T\-E\-M\-S}}
\index{N\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-S\-T\-A\-T\-\_\-\-I\-T\-E\-M\-S@{N\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-S\-T\-A\-T\-\_\-\-I\-T\-E\-M\-S}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{N\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-S\-T\-A\-T\-\_\-\-I\-T\-E\-M\-S}]{\setlength{\rightskip}{0pt plus 5cm}\#define N\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-S\-T\-A\-T\-\_\-\-I\-T\-E\-M\-S~sizeof({\bf thread\-\_\-stat\-\_\-items}) / sizeof($\ast${\bf thread\-\_\-stat\-\_\-items})}}\label{dedos__threads_8c_aa740056ba0da4148b051e08640e540f7}


Definition at line 44 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_a56ecb7e9b922bd8793d20eaebf793be7}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!O\-U\-T\-P\-U\-T\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-N\-D\-E\-X@{O\-U\-T\-P\-U\-T\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-N\-D\-E\-X}}
\index{O\-U\-T\-P\-U\-T\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-N\-D\-E\-X@{O\-U\-T\-P\-U\-T\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-N\-D\-E\-X}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{O\-U\-T\-P\-U\-T\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-N\-D\-E\-X}]{\setlength{\rightskip}{0pt plus 5cm}\#define O\-U\-T\-P\-U\-T\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-N\-D\-E\-X~{\bf M\-A\-X\-\_\-\-D\-E\-D\-O\-S\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-I\-D} + 1}}\label{dedos__threads_8c_a56ecb7e9b922bd8793d20eaebf793be7}


The index at which to store the \hyperlink{structdedos__thread}{dedos\-\_\-thread} handling sending messages. 



Definition at line 27 of file dedos\-\_\-threads.\-c.



\subsection{Function Documentation}
\hypertarget{dedos__threads_8c_a8149e98a49e985082afb18b9fe30e94d}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!dedos\-\_\-thread\-\_\-join@{dedos\-\_\-thread\-\_\-join}}
\index{dedos\-\_\-thread\-\_\-join@{dedos\-\_\-thread\-\_\-join}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{dedos\-\_\-thread\-\_\-join}]{\setlength{\rightskip}{0pt plus 5cm}void dedos\-\_\-thread\-\_\-join (
\begin{DoxyParamCaption}
\item[{struct {\bf dedos\-\_\-thread} $\ast$}]{thread}
\end{DoxyParamCaption}
)}}\label{dedos__threads_8c_a8149e98a49e985082afb18b9fe30e94d}


Joins and destroys the \hyperlink{structdedos__thread}{dedos\-\_\-thread}. 



Definition at line 139 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_a84fe48f8c905bad9ee99509742472900}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!dedos\-\_\-thread\-\_\-should\-\_\-exit@{dedos\-\_\-thread\-\_\-should\-\_\-exit}}
\index{dedos\-\_\-thread\-\_\-should\-\_\-exit@{dedos\-\_\-thread\-\_\-should\-\_\-exit}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{dedos\-\_\-thread\-\_\-should\-\_\-exit}]{\setlength{\rightskip}{0pt plus 5cm}int dedos\-\_\-thread\-\_\-should\-\_\-exit (
\begin{DoxyParamCaption}
\item[{struct {\bf dedos\-\_\-thread} $\ast$}]{thread}
\end{DoxyParamCaption}
)}}\label{dedos__threads_8c_a84fe48f8c905bad9ee99509742472900}


Returns 1 if the exit signal has been triggered, otherwise 0. 



Definition at line 144 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_a2035e21970dd9c3b7ce4465805a1cfcd}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!dedos\-\_\-thread\-\_\-starter@{dedos\-\_\-thread\-\_\-starter}}
\index{dedos\-\_\-thread\-\_\-starter@{dedos\-\_\-thread\-\_\-starter}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{dedos\-\_\-thread\-\_\-starter}]{\setlength{\rightskip}{0pt plus 5cm}static void$\ast$ dedos\-\_\-thread\-\_\-starter (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{thread\-\_\-init\-\_\-v}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{dedos__threads_8c_a2035e21970dd9c3b7ce4465805a1cfcd}


The actual function passed to pthread\-\_\-create() that starts a new thread. 

Initilizes the appropriate structures, posts to the start semaphore, then calls the appropriate function. 
\begin{DoxyParams}{Parameters}
{\em thread\-\_\-init\-\_\-v} & Pointer to the \hyperlink{structthread__init}{thread\-\_\-init} structure \\
\hline
\end{DoxyParams}


Definition at line 157 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_a97563d2c123c5d0c52088ae62c69dc7e}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!dedos\-\_\-thread\-\_\-stop@{dedos\-\_\-thread\-\_\-stop}}
\index{dedos\-\_\-thread\-\_\-stop@{dedos\-\_\-thread\-\_\-stop}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{dedos\-\_\-thread\-\_\-stop}]{\setlength{\rightskip}{0pt plus 5cm}void dedos\-\_\-thread\-\_\-stop (
\begin{DoxyParamCaption}
\item[{struct {\bf dedos\-\_\-thread} $\ast$}]{thread}
\end{DoxyParamCaption}
)}}\label{dedos__threads_8c_a97563d2c123c5d0c52088ae62c69dc7e}


Sets the exit signal for a thread, causing the main loop to quit. 



Definition at line 130 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_adccaa8b29bf590e9e04c14d1943c89ac}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!gather\-\_\-thread\-\_\-metrics@{gather\-\_\-thread\-\_\-metrics}}
\index{gather\-\_\-thread\-\_\-metrics@{gather\-\_\-thread\-\_\-metrics}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{gather\-\_\-thread\-\_\-metrics}]{\setlength{\rightskip}{0pt plus 5cm}static void gather\-\_\-thread\-\_\-metrics (
\begin{DoxyParamCaption}
\item[{struct {\bf dedos\-\_\-thread} $\ast$}]{thread}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}}\label{dedos__threads_8c_adccaa8b29bf590e9e04c14d1943c89ac}


Definition at line 191 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_ad2be2a452f4ee946b74f926d9b885af6}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!get\-\_\-dedos\-\_\-thread@{get\-\_\-dedos\-\_\-thread}}
\index{get\-\_\-dedos\-\_\-thread@{get\-\_\-dedos\-\_\-thread}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{get\-\_\-dedos\-\_\-thread}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf dedos\-\_\-thread}$\ast$ get\-\_\-dedos\-\_\-thread (
\begin{DoxyParamCaption}
\item[{int}]{id}
\end{DoxyParamCaption}
)}}\label{dedos__threads_8c_ad2be2a452f4ee946b74f926d9b885af6}


Returns the \hyperlink{structdedos__thread}{dedos\-\_\-thread} with the given I\-D. 



Definition at line 53 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_a52b3a7e9424f741c06d541d059a47e98}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!init\-\_\-dedos\-\_\-thread@{init\-\_\-dedos\-\_\-thread}}
\index{init\-\_\-dedos\-\_\-thread@{init\-\_\-dedos\-\_\-thread}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{init\-\_\-dedos\-\_\-thread}]{\setlength{\rightskip}{0pt plus 5cm}static int init\-\_\-dedos\-\_\-thread (
\begin{DoxyParamCaption}
\item[{struct {\bf dedos\-\_\-thread} $\ast$}]{thread, }
\item[{enum {\bf thread\-\_\-mode}}]{mode, }
\item[{int}]{id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{dedos__threads_8c_a52b3a7e9424f741c06d541d059a47e98}


Initializes a \hyperlink{structdedos__thread}{dedos\-\_\-thread} structure to contain the appropriate fields. 



Definition at line 73 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_a113bd0ac8ad6e871cf4e2c713b6995a8}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!init\-\_\-thread\-\_\-stat\-\_\-items@{init\-\_\-thread\-\_\-stat\-\_\-items}}
\index{init\-\_\-thread\-\_\-stat\-\_\-items@{init\-\_\-thread\-\_\-stat\-\_\-items}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{init\-\_\-thread\-\_\-stat\-\_\-items}]{\setlength{\rightskip}{0pt plus 5cm}static void init\-\_\-thread\-\_\-stat\-\_\-items (
\begin{DoxyParamCaption}
\item[{int}]{id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}}\label{dedos__threads_8c_a113bd0ac8ad6e871cf4e2c713b6995a8}


Initilizes the stat items associated with a thread. 



Definition at line 47 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_a5e57e733d68866e6cfae829583da6f89}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!pin\-\_\-thread@{pin\-\_\-thread}}
\index{pin\-\_\-thread@{pin\-\_\-thread}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{pin\-\_\-thread}]{\setlength{\rightskip}{0pt plus 5cm}static int pin\-\_\-thread (
\begin{DoxyParamCaption}
\item[{pthread\-\_\-t}]{ptid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{dedos__threads_8c_a5e57e733d68866e6cfae829583da6f89}


Pins the thread with the pthread id {\ttfamily ptid} to the first unused core. 



Definition at line 108 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_aa336318af10f81d18bfd2ea9fb0ce45d}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!start\-\_\-dedos\-\_\-thread@{start\-\_\-dedos\-\_\-thread}}
\index{start\-\_\-dedos\-\_\-thread@{start\-\_\-dedos\-\_\-thread}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{start\-\_\-dedos\-\_\-thread}]{\setlength{\rightskip}{0pt plus 5cm}int start\-\_\-dedos\-\_\-thread (
\begin{DoxyParamCaption}
\item[{{\bf dedos\-\_\-thread\-\_\-fn}}]{thread\-\_\-fn, }
\item[{{\bf dedos\-\_\-thread\-\_\-init\-\_\-fn}}]{init\-\_\-fn, }
\item[{{\bf dedos\-\_\-thread\-\_\-destroy\-\_\-fn}}]{destroy\-\_\-fn, }
\item[{enum {\bf blocking\-\_\-mode}}]{mode, }
\item[{int}]{id, }
\item[{struct {\bf dedos\-\_\-thread} $\ast$}]{thread}
\end{DoxyParamCaption}
)}}\label{dedos__threads_8c_aa336318af10f81d18bfd2ea9fb0ce45d}


Initilizes and starts execution of a \hyperlink{structdedos__thread}{dedos\-\_\-thread}. 

Note\-: Blocks until the thread is started!  thread\-\_\-fn The function to execute once the thread starts. 
\begin{DoxyParams}{Parameters}
{\em init\-\_\-fn} & The function to execute once, at the start of the thread \\
\hline
{\em destroy\-\_\-fn} & The function to execute when the thread exits \\
\hline
{\em mode} & \mbox{[}un\mbox{]}pinned \\
\hline
{\em id} & Unique identifier for the thread \\
\hline
{\em thread} & The object into which to store the thread \\
\hline
\end{DoxyParams}


Definition at line 250 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_a0e9f00b60e6fbcefadacb5f430abf8aa}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!thread\-\_\-wait@{thread\-\_\-wait}}
\index{thread\-\_\-wait@{thread\-\_\-wait}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{thread\-\_\-wait}]{\setlength{\rightskip}{0pt plus 5cm}int thread\-\_\-wait (
\begin{DoxyParamCaption}
\item[{struct {\bf dedos\-\_\-thread} $\ast$}]{thread, }
\item[{struct timespec $\ast$}]{abs\-\_\-timeout}
\end{DoxyParamCaption}
)}}\label{dedos__threads_8c_a0e9f00b60e6fbcefadacb5f430abf8aa}


To be called from the thread, causes it to wait until a message has been received or the timeout has been reached. 


\begin{DoxyParams}{Parameters}
{\em thread} & The thread to block from \\
\hline
{\em abs\-\_\-timeout} & Time since epoch at which thread should block until \\
\hline
\end{DoxyParams}


Definition at line 215 of file dedos\-\_\-threads.\-c.



\subsection{Variable Documentation}
\hypertarget{dedos__threads_8c_a3c60433df66ec61cd178275f4231db3d}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!dedos\-\_\-threads@{dedos\-\_\-threads}}
\index{dedos\-\_\-threads@{dedos\-\_\-threads}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{dedos\-\_\-threads}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf dedos\-\_\-thread}$\ast$ dedos\-\_\-threads\mbox{[}32+2\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{dedos__threads_8c_a3c60433df66ec61cd178275f4231db3d}


Static structure to hold created \hyperlink{structdedos__thread}{dedos\-\_\-thread}'s. 



Definition at line 30 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_aecb0e59916f729a6b443d7bb30ae58b0}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!pinned\-\_\-cores@{pinned\-\_\-cores}}
\index{pinned\-\_\-cores@{pinned\-\_\-cores}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{pinned\-\_\-cores}]{\setlength{\rightskip}{0pt plus 5cm}int pinned\-\_\-cores\mbox{[}16\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{dedos__threads_8c_aecb0e59916f729a6b443d7bb30ae58b0}


Keep track of which cores have been assigned to threads. 



Definition at line 32 of file dedos\-\_\-threads.\-c.

\hypertarget{dedos__threads_8c_afb032c6cebdf1139918c77512a8d5391}{\index{dedos\-\_\-threads.\-c@{dedos\-\_\-threads.\-c}!thread\-\_\-stat\-\_\-items@{thread\-\_\-stat\-\_\-items}}
\index{thread\-\_\-stat\-\_\-items@{thread\-\_\-stat\-\_\-items}!dedos_threads.c@{dedos\-\_\-threads.\-c}}
\subsubsection[{thread\-\_\-stat\-\_\-items}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf stat\-\_\-id} thread\-\_\-stat\-\_\-items\mbox{[}$\,$\mbox{]}}}\label{dedos__threads_8c_afb032c6cebdf1139918c77512a8d5391}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= \{
    \hyperlink{stat__ids_8h_ac210bd14ba53357098c0b3ebdd69784ea3c85d2952150487e586b3802e537ccbe}{THREAD\_UCPUTIME},
    \hyperlink{stat__ids_8h_ac210bd14ba53357098c0b3ebdd69784eaa63b74df8de1a0b9060b2a03a509dcca}{THREAD\_SCPUTIME},
    \hyperlink{stat__ids_8h_ac210bd14ba53357098c0b3ebdd69784ea79748a810c4e5630689a4b1219617650}{THREAD\_MAXRSS},
    \hyperlink{stat__ids_8h_ac210bd14ba53357098c0b3ebdd69784ea6af8b8f31f19cb35feddf1d139f8e3f4}{THREAD\_MINFLT},
    \hyperlink{stat__ids_8h_ac210bd14ba53357098c0b3ebdd69784eada0624fa212ca4a497fd97a18bb1238f}{THREAD\_MAJFLT},
    \hyperlink{stat__ids_8h_ac210bd14ba53357098c0b3ebdd69784ea6cb62a4f93fea310ff9dbf5f0e1312c7}{THREAD\_VCSW},
    \hyperlink{stat__ids_8h_ac210bd14ba53357098c0b3ebdd69784ea2feb94c9d8936da27ab7e7f8c5e8f12b}{THREAD\_IVCSW}
\}
\end{DoxyCode}


Definition at line 34 of file dedos\-\_\-threads.\-c.

